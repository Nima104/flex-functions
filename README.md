For now this uses random pairing. TODO: eventually use the algorithm from https://github.com/Nima104/flex-pairing. 
